<form id="loginForm">
  <input
    type="text"
    id="username"
    name="username"
    placeholder="Имя пользователя"
    required
  />
  <input
    type="password"
    id="password"
    name="password"
    placeholder="Пароль"
    required
  />
  <button type="submit">Войти</button>
</form>
<div id="message"></div>

<script>
  document
    .getElementById("loginForm")
    .addEventListener("submit", function (event) {
      event.preventDefault(); // Отменяем стандартную отправку формы

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();
      const messageElem = document.getElementById("message");

      // Простая валидация
      if (!username) {
        messageElem.textContent = "Введите имя пользователя";
        return;
      }
      if (!password || password.length < 6) {
        messageElem.textContent = "Пароль должен быть не менее 6 символов";
        return;
      }
      messageElem.textContent = "";

      // Подготовка данных для отправки
      const data = { username, password };

      // Отправка данных через fetch (AJAX)
      fetch("/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      })
        .then((response) => {
          if (!response.ok) throw new Error("Ошибка сети");
          return response.json();
        })
        .then((result) => {
          // Обработка ответа от сервера
          if (result.success) {
            messageElem.textContent = "Вход выполнен успешно!";
            // Здесь можно перенаправить или обновить страницу
          } else {
            messageElem.textContent = "Ошибка: " + result.message;
          }
        })
        .catch((error) => {
          messageElem.textContent = "Ошибка при отправке: " + error.message;
        });
    });
</script>
